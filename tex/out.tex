\documentclass{article}
\usepackage{proof}
\usepackage{amssymb,amsmath}
\usepackage{relsize}
\usepackage[
    % a0paper,
    % landscape,
    papersize={100in,20in},
    margin={2in,2in}
    %total={1800in, 10in},
    ]{geometry}


\def\code#1{\texttt{#1}}

\title{Big Proof Trees}
\author{Iain Moncrief}
\date{February 2023}

\begin{document}
\relscale{0.1}

\maketitle

\section{Introduction}


$$\infer[]{\{\ \},[] \vdash \code{map id (nats 5)}  \Rightarrow \code{[1, 2, 3, 4, 5]}}{\infer[]{\{\ \},[] \vdash \code{map id}  \Rightarrow \code{(closure xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}}{\infer[]{\{\ \},[] \vdash \code{map}  \Rightarrow \code{(closure f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}}{\infer[]{\{\ \},[] \vdash \code{(fun f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}  \Rightarrow \code{(closure f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}}{}} && \infer[]{\{\ \},[] \vdash \code{id}  \Rightarrow \code{(closure x -> x)}}{\infer[]{\{\ \},[] \vdash \code{(fun x -> x)}  \Rightarrow \code{(closure x -> x)}}{}} && \infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{(fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}  \Rightarrow \code{(closure xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}}{}} && \infer[]{\{\ \},[] \vdash \code{nats 5}  \Rightarrow \code{[1, 2, 3, 4, 5]}}{\infer[]{\{\ \},[] \vdash \code{nats}  \Rightarrow \code{(closure n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}}{\infer[]{\{\ \},[] \vdash \code{(fun n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}  \Rightarrow \code{(closure n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}}{}} && \infer[]{\{\ \},[] \vdash \code{5}  \Rightarrow \code{5}}{} && \infer[]{\{\ \},[\code{n}  \mapsto \code{5}] \vdash \code{if (n == 0) then [] else (nats ((n - 1)) ++ [n])}  \Rightarrow \code{[1, 2, 3, 4, 5]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{5}] \vdash \code{(n == 0)}  \Rightarrow \code{False}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{5}] \vdash \code{n}  \Rightarrow \code{5}}{} && \infer[]{\{\ \},[] \vdash \code{0}  \Rightarrow \code{0}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{5}] \vdash \code{(nats ((n - 1)) ++ [n])}  \Rightarrow \code{[1, 2, 3, 4, 5]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{5}] \vdash \code{nats ((n - 1))}  \Rightarrow \code{[1, 2, 3, 4]}}{\infer[]{\{\ \},[] \vdash \code{nats}  \Rightarrow \code{(closure n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}}{\infer[]{\{\ \},[] \vdash \code{(fun n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}  \Rightarrow \code{(closure n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{5}] \vdash \code{(n - 1)}  \Rightarrow \code{4}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{5}] \vdash \code{n}  \Rightarrow \code{5}}{} && \infer[]{\{\ \},[] \vdash \code{1}  \Rightarrow \code{1}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{4}] \vdash \code{if (n == 0) then [] else (nats ((n - 1)) ++ [n])}  \Rightarrow \code{[1, 2, 3, 4]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{4}] \vdash \code{(n == 0)}  \Rightarrow \code{False}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{4}] \vdash \code{n}  \Rightarrow \code{4}}{} && \infer[]{\{\ \},[] \vdash \code{0}  \Rightarrow \code{0}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{4}] \vdash \code{(nats ((n - 1)) ++ [n])}  \Rightarrow \code{[1, 2, 3, 4]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{4}] \vdash \code{nats ((n - 1))}  \Rightarrow \code{[1, 2, 3]}}{\infer[]{\{\ \},[] \vdash \code{nats}  \Rightarrow \code{(closure n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}}{\infer[]{\{\ \},[] \vdash \code{(fun n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}  \Rightarrow \code{(closure n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{4}] \vdash \code{(n - 1)}  \Rightarrow \code{3}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{4}] \vdash \code{n}  \Rightarrow \code{4}}{} && \infer[]{\{\ \},[] \vdash \code{1}  \Rightarrow \code{1}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{3}] \vdash \code{if (n == 0) then [] else (nats ((n - 1)) ++ [n])}  \Rightarrow \code{[1, 2, 3]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{3}] \vdash \code{(n == 0)}  \Rightarrow \code{False}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{3}] \vdash \code{n}  \Rightarrow \code{3}}{} && \infer[]{\{\ \},[] \vdash \code{0}  \Rightarrow \code{0}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{3}] \vdash \code{(nats ((n - 1)) ++ [n])}  \Rightarrow \code{[1, 2, 3]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{3}] \vdash \code{nats ((n - 1))}  \Rightarrow \code{[1, 2]}}{\infer[]{\{\ \},[] \vdash \code{nats}  \Rightarrow \code{(closure n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}}{\infer[]{\{\ \},[] \vdash \code{(fun n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}  \Rightarrow \code{(closure n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{3}] \vdash \code{(n - 1)}  \Rightarrow \code{2}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{3}] \vdash \code{n}  \Rightarrow \code{3}}{} && \infer[]{\{\ \},[] \vdash \code{1}  \Rightarrow \code{1}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{2}] \vdash \code{if (n == 0) then [] else (nats ((n - 1)) ++ [n])}  \Rightarrow \code{[1, 2]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{2}] \vdash \code{(n == 0)}  \Rightarrow \code{False}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{2}] \vdash \code{n}  \Rightarrow \code{2}}{} && \infer[]{\{\ \},[] \vdash \code{0}  \Rightarrow \code{0}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{2}] \vdash \code{(nats ((n - 1)) ++ [n])}  \Rightarrow \code{[1, 2]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{2}] \vdash \code{nats ((n - 1))}  \Rightarrow \code{[1]}}{\infer[]{\{\ \},[] \vdash \code{nats}  \Rightarrow \code{(closure n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}}{\infer[]{\{\ \},[] \vdash \code{(fun n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}  \Rightarrow \code{(closure n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{2}] \vdash \code{(n - 1)}  \Rightarrow \code{1}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{2}] \vdash \code{n}  \Rightarrow \code{2}}{} && \infer[]{\{\ \},[] \vdash \code{1}  \Rightarrow \code{1}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{1}] \vdash \code{if (n == 0) then [] else (nats ((n - 1)) ++ [n])}  \Rightarrow \code{[1]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{1}] \vdash \code{(n == 0)}  \Rightarrow \code{False}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{1}] \vdash \code{n}  \Rightarrow \code{1}}{} && \infer[]{\{\ \},[] \vdash \code{0}  \Rightarrow \code{0}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{1}] \vdash \code{(nats ((n - 1)) ++ [n])}  \Rightarrow \code{[1]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{1}] \vdash \code{nats ((n - 1))}  \Rightarrow \code{[]}}{\infer[]{\{\ \},[] \vdash \code{nats}  \Rightarrow \code{(closure n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}}{\infer[]{\{\ \},[] \vdash \code{(fun n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}  \Rightarrow \code{(closure n -> if (n == 0) then [] else (nats ((n - 1)) ++ [n]))}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{1}] \vdash \code{(n - 1)}  \Rightarrow \code{0}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{1}] \vdash \code{n}  \Rightarrow \code{1}}{} && \infer[]{\{\ \},[] \vdash \code{1}  \Rightarrow \code{1}}{}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{0}] \vdash \code{if (n == 0) then [] else (nats ((n - 1)) ++ [n])}  \Rightarrow \code{[]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{0}] \vdash \code{(n == 0)}  \Rightarrow \code{True}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{0}] \vdash \code{n}  \Rightarrow \code{0}}{} && \infer[]{\{\ \},[] \vdash \code{0}  \Rightarrow \code{0}}{}} && \infer[]{\{\ \},[] \vdash \code{[]}  \Rightarrow \code{[]}}{}}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{1}] \vdash \code{[n]}  \Rightarrow \code{[1]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{1}] \vdash \code{n}  \Rightarrow \code{1}}{}}}}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{2}] \vdash \code{[n]}  \Rightarrow \code{[2]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{2}] \vdash \code{n}  \Rightarrow \code{2}}{}}}}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{3}] \vdash \code{[n]}  \Rightarrow \code{[3]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{3}] \vdash \code{n}  \Rightarrow \code{3}}{}}}}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{4}] \vdash \code{[n]}  \Rightarrow \code{[4]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{4}] \vdash \code{n}  \Rightarrow \code{4}}{}}}}} && \infer[]{\{\ \},[\code{n}  \mapsto \code{5}] \vdash \code{[n]}  \Rightarrow \code{[5]}}{\infer[]{\{\ \},[\code{n}  \mapsto \code{5}] \vdash \code{n}  \Rightarrow \code{5}}{}}}}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[1, 2, 3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))}  \Rightarrow \code{[1, 2, 3, 4, 5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[1, 2, 3, 4, 5]}] \vdash \code{(xs == [])}  \Rightarrow \code{False}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[1, 2, 3, 4, 5]}] \vdash \code{xs}  \Rightarrow \code{[1, 2, 3, 4, 5]}}{} && \infer[]{\{\ \},[] \vdash \code{[]}  \Rightarrow \code{[]}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[1, 2, 3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{([f (head xs)] ++ map f (tail xs))}  \Rightarrow \code{[1, 2, 3, 4, 5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[1, 2, 3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{[f (head xs)]}  \Rightarrow \code{[1]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[1, 2, 3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f (head xs)}  \Rightarrow \code{1}}{\infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f}  \Rightarrow \code{(closure x -> x)}}{} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[1, 2, 3, 4, 5]}] \vdash \code{head xs}  \Rightarrow \code{1}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[1, 2, 3, 4, 5]}] \vdash \code{xs}  \Rightarrow \code{[1, 2, 3, 4, 5]}}{}} && \infer[]{\{\ \},[\code{x}  \mapsto \code{1}] \vdash \code{x}  \Rightarrow \code{1}}{}}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[1, 2, 3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{map f (tail xs)}  \Rightarrow \code{[2, 3, 4, 5]}}{\infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{map f}  \Rightarrow \code{(closure xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}}{\infer[]{\{\ \},[] \vdash \code{map}  \Rightarrow \code{(closure f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}}{\infer[]{\{\ \},[] \vdash \code{(fun f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}  \Rightarrow \code{(closure f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}}{}} && \infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f}  \Rightarrow \code{(closure x -> x)}}{} && \infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{(fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}  \Rightarrow \code{(closure xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[1, 2, 3, 4, 5]}] \vdash \code{tail xs}  \Rightarrow \code{[2, 3, 4, 5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[1, 2, 3, 4, 5]}] \vdash \code{xs}  \Rightarrow \code{[1, 2, 3, 4, 5]}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[2, 3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))}  \Rightarrow \code{[2, 3, 4, 5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[2, 3, 4, 5]}] \vdash \code{(xs == [])}  \Rightarrow \code{False}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[2, 3, 4, 5]}] \vdash \code{xs}  \Rightarrow \code{[2, 3, 4, 5]}}{} && \infer[]{\{\ \},[] \vdash \code{[]}  \Rightarrow \code{[]}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[2, 3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{([f (head xs)] ++ map f (tail xs))}  \Rightarrow \code{[2, 3, 4, 5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[2, 3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{[f (head xs)]}  \Rightarrow \code{[2]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[2, 3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f (head xs)}  \Rightarrow \code{2}}{\infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f}  \Rightarrow \code{(closure x -> x)}}{} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[2, 3, 4, 5]}] \vdash \code{head xs}  \Rightarrow \code{2}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[2, 3, 4, 5]}] \vdash \code{xs}  \Rightarrow \code{[2, 3, 4, 5]}}{}} && \infer[]{\{\ \},[\code{x}  \mapsto \code{2}] \vdash \code{x}  \Rightarrow \code{2}}{}}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[2, 3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{map f (tail xs)}  \Rightarrow \code{[3, 4, 5]}}{\infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{map f}  \Rightarrow \code{(closure xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}}{\infer[]{\{\ \},[] \vdash \code{map}  \Rightarrow \code{(closure f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}}{\infer[]{\{\ \},[] \vdash \code{(fun f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}  \Rightarrow \code{(closure f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}}{}} && \infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f}  \Rightarrow \code{(closure x -> x)}}{} && \infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{(fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}  \Rightarrow \code{(closure xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[2, 3, 4, 5]}] \vdash \code{tail xs}  \Rightarrow \code{[3, 4, 5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[2, 3, 4, 5]}] \vdash \code{xs}  \Rightarrow \code{[2, 3, 4, 5]}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))}  \Rightarrow \code{[3, 4, 5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[3, 4, 5]}] \vdash \code{(xs == [])}  \Rightarrow \code{False}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[3, 4, 5]}] \vdash \code{xs}  \Rightarrow \code{[3, 4, 5]}}{} && \infer[]{\{\ \},[] \vdash \code{[]}  \Rightarrow \code{[]}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{([f (head xs)] ++ map f (tail xs))}  \Rightarrow \code{[3, 4, 5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{[f (head xs)]}  \Rightarrow \code{[3]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f (head xs)}  \Rightarrow \code{3}}{\infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f}  \Rightarrow \code{(closure x -> x)}}{} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[3, 4, 5]}] \vdash \code{head xs}  \Rightarrow \code{3}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[3, 4, 5]}] \vdash \code{xs}  \Rightarrow \code{[3, 4, 5]}}{}} && \infer[]{\{\ \},[\code{x}  \mapsto \code{3}] \vdash \code{x}  \Rightarrow \code{3}}{}}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[3, 4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{map f (tail xs)}  \Rightarrow \code{[4, 5]}}{\infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{map f}  \Rightarrow \code{(closure xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}}{\infer[]{\{\ \},[] \vdash \code{map}  \Rightarrow \code{(closure f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}}{\infer[]{\{\ \},[] \vdash \code{(fun f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}  \Rightarrow \code{(closure f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}}{}} && \infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f}  \Rightarrow \code{(closure x -> x)}}{} && \infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{(fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}  \Rightarrow \code{(closure xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[3, 4, 5]}] \vdash \code{tail xs}  \Rightarrow \code{[4, 5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[3, 4, 5]}] \vdash \code{xs}  \Rightarrow \code{[3, 4, 5]}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))}  \Rightarrow \code{[4, 5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[4, 5]}] \vdash \code{(xs == [])}  \Rightarrow \code{False}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[4, 5]}] \vdash \code{xs}  \Rightarrow \code{[4, 5]}}{} && \infer[]{\{\ \},[] \vdash \code{[]}  \Rightarrow \code{[]}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{([f (head xs)] ++ map f (tail xs))}  \Rightarrow \code{[4, 5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{[f (head xs)]}  \Rightarrow \code{[4]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f (head xs)}  \Rightarrow \code{4}}{\infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f}  \Rightarrow \code{(closure x -> x)}}{} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[4, 5]}] \vdash \code{head xs}  \Rightarrow \code{4}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[4, 5]}] \vdash \code{xs}  \Rightarrow \code{[4, 5]}}{}} && \infer[]{\{\ \},[\code{x}  \mapsto \code{4}] \vdash \code{x}  \Rightarrow \code{4}}{}}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[4, 5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{map f (tail xs)}  \Rightarrow \code{[5]}}{\infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{map f}  \Rightarrow \code{(closure xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}}{\infer[]{\{\ \},[] \vdash \code{map}  \Rightarrow \code{(closure f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}}{\infer[]{\{\ \},[] \vdash \code{(fun f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}  \Rightarrow \code{(closure f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}}{}} && \infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f}  \Rightarrow \code{(closure x -> x)}}{} && \infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{(fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}  \Rightarrow \code{(closure xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[4, 5]}] \vdash \code{tail xs}  \Rightarrow \code{[5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[4, 5]}] \vdash \code{xs}  \Rightarrow \code{[4, 5]}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))}  \Rightarrow \code{[5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[5]}] \vdash \code{(xs == [])}  \Rightarrow \code{False}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[5]}] \vdash \code{xs}  \Rightarrow \code{[5]}}{} && \infer[]{\{\ \},[] \vdash \code{[]}  \Rightarrow \code{[]}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{([f (head xs)] ++ map f (tail xs))}  \Rightarrow \code{[5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{[f (head xs)]}  \Rightarrow \code{[5]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f (head xs)}  \Rightarrow \code{5}}{\infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f}  \Rightarrow \code{(closure x -> x)}}{} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[5]}] \vdash \code{head xs}  \Rightarrow \code{5}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[5]}] \vdash \code{xs}  \Rightarrow \code{[5]}}{}} && \infer[]{\{\ \},[\code{x}  \mapsto \code{5}] \vdash \code{x}  \Rightarrow \code{5}}{}}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[5]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{map f (tail xs)}  \Rightarrow \code{[]}}{\infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{map f}  \Rightarrow \code{(closure xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}}{\infer[]{\{\ \},[] \vdash \code{map}  \Rightarrow \code{(closure f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}}{\infer[]{\{\ \},[] \vdash \code{(fun f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}  \Rightarrow \code{(closure f -> (fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))))}}{}} && \infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{f}  \Rightarrow \code{(closure x -> x)}}{} && \infer[]{\{\ \},[\code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{(fun xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}  \Rightarrow \code{(closure xs -> if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs)))}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[5]}] \vdash \code{tail xs}  \Rightarrow \code{[]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[5]}] \vdash \code{xs}  \Rightarrow \code{[5]}}{}} && \infer[]{\{\ \},[\code{xs}  \mapsto \code{[]}, \code{f}  \mapsto \code{(closure x -> x)}] \vdash \code{if (xs == []) then [] else ([f (head xs)] ++ map f (tail xs))}  \Rightarrow \code{[]}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[]}] \vdash \code{(xs == [])}  \Rightarrow \code{True}}{\infer[]{\{\ \},[\code{xs}  \mapsto \code{[]}] \vdash \code{xs}  \Rightarrow \code{[]}}{} && \infer[]{\{\ \},[] \vdash \code{[]}  \Rightarrow \code{[]}}{}} && \infer[]{\{\ \},[] \vdash \code{[]}  \Rightarrow \code{[]}}{}}}}}}}}}}}}}}}}}}$$
\end{document}